<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<title>Canvasloth - demo</title>
	<link rel="stylesheet" href="canvasloth.css"/>
	<style>
	.canvasloth {
		width: 640px;
		height: 480px;
		}
		canvas {
			background: #ddd;
			}
		.canvasloth-hud {
			font: 11px sans-serif;
			}
			.canvasloth-hud .console {
				position: absolute;
				overflow: auto;
				width: 210px;
				left: 0;
				top: 0;
				bottom: 0;
				padding: .2em .3em;
				background: rgba(0,0,0,.2);
				}
	</style>
	<!--<script src="../jquery.js"></script>-->
	<script src="canvasloth.js"></script>
	<script>
	function lg(s) { console.log(s); }
	function main() {

		// Game class
		function Game() {
			this.name = 'Game';
		}
		Game.prototype = {
			ready: function(cnv, ctx) {
				this.cnv = cnv;
				this.el_console = document.querySelector('.console');
				this.consoleWrite('<b>ready</b> ( )');
				var img = cnv.image('img2.jpg');
				lg(img)
			},
			loop: function() {
				this.consoleWrite('loop... frameTime: ' + (Math.round(this.cnv.frameTime() * 1000) / 1000) + ' (sec)');
			},
			consoleWrite: function(msg) {
				var div = document.createElement('div');
				div.innerHTML = msg;
				this.el_console.appendChild(div);
				this.el_console.scrollTop = 1000000;
			},
			focus:     function(e)         { this.consoleWrite('<b>focus</b>     ( )'); },
			blur:      function(e)         { this.consoleWrite('<b>blur</b>      ( )'); },
			keyUp:     function(key)       { this.consoleWrite('key<b>Up</b>     ( key <b>'+key+'</b> )'); },
			keyDown:   function(key)       { this.consoleWrite('key<b>Down</b>   ( key <b>'+key+'</b> )'); },
			mouseMove: function(x, y)      { this.consoleWrite('mouse<b>Move</b> ( x <b>'+x+'</b>, y <b>'+y+'</b> )'); },
			mouseUp:   function(x, y, btn) { this.consoleWrite('mouse<b>Up</b>   ( x <b>'+x+'</b>, y <b>'+y+'</b>, btn <b>'+btn+'</b> )'); },
			mouseDown: function(x, y, btn) { this.consoleWrite('mouse<b>Down</b> ( x <b>'+x+'</b>, y <b>'+y+'</b>, btn <b>'+btn+'</b> )'); }
		};

		// Game instance
		var game = new Game();

		// Creation of an instance of Canvasloth
		new Canvasloth({
			container: document.querySelectorAll('.canvasloth'),
			context: '2d',
			autoFocus: true,
			fps: 1,
			thisApp: game,
			ready: game.ready,
			loop: game.loop,
			events: {
				keyUp:     game.keyUp,
				keyDown:   game.keyDown,
				focus:     game.focus,
				blur:      game.blur,
				// mouseMove: game.mouseMove,
				mouseUp:   game.mouseUp,
				mouseDown: game.mouseDown
			}
		});
	}

	// $(main);
	window.onload = main;
	</script>
</head>
<body>

<div style="height:500px"></div>

<div class="canvasloth">
	<div class="canvasloth-assets">
		<img src="img1.jpg"/>
		<img src="img2.jpg"/>
		<img src="img3.jpg"/>
	</div>
	<div class="canvasloth-hud">
		<div class="console"></div>
	</div>
</div>

<div style="height:500px"></div>

</body>
</html>
